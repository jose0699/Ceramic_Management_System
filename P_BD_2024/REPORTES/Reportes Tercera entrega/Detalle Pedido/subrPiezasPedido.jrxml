<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.21.3.final using JasperReports Library version 6.21.3-4a3078d20785ebe464f18037d738d12fc98c13cf  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="subrPiezasPedido" pageWidth="568" pageHeight="792" columnWidth="568" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="a3be8b1d-9d24-4f26-b1b3-893714dce2d0">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Proyecto_BD"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<parameter name="Tasa $" class="java.math.BigDecimal">
		<parameterDescription><![CDATA[Tasa para ejecutar la conversión a Bs]]></parameterDescription>
	</parameter>
	<parameter name="id_Pedido" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT 
	d.uid_detalle,
	p.uid_pieza,
	c.nombre AS nombre_col,
	m.molde,
	d.cantidad,
	p.precio AS p_inst,
	f.precio  AS p_fami
FROM detalle_pedido_pieza d
JOIN pedido x ON x.uid_pedido = d.uid_pedido
JOIN pieza p ON p.uid_pieza = d.uid_pieza
LEFT JOIN familiar_historico_precio f ON p.uid_pieza = f.uid_pieza AND f.fecha_inicio::date = obtener_fecha_historico(p.uid_pieza,x.fecha_entrega)
JOIN nombres_moldes m ON m.uid_molde = p.uid_molde
JOIN coleccion c ON c.uid_coleccion = p.uid_coleccion
WHERE d.uid_pedido = $P{id_Pedido} 
ORDER BY nombre_col DESC;]]>
	</queryString>
	<field name="uid_detalle" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="uid_detalle"/>
		<property name="com.jaspersoft.studio.field.label" value="uid_detalle"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="detalle_pedido_pieza"/>
	</field>
	<field name="uid_pieza" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="uid_pieza"/>
		<property name="com.jaspersoft.studio.field.label" value="uid_pieza"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="pieza"/>
	</field>
	<field name="nombre_col" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="nombre_col"/>
		<property name="com.jaspersoft.studio.field.label" value="nombre_col"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="coleccion"/>
	</field>
	<field name="molde" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="molde"/>
		<property name="com.jaspersoft.studio.field.label" value="molde"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="nombres_moldes"/>
	</field>
	<field name="cantidad" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="cantidad"/>
		<property name="com.jaspersoft.studio.field.label" value="cantidad"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="detalle_pedido_pieza"/>
	</field>
	<field name="p_inst" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="p_inst"/>
		<property name="com.jaspersoft.studio.field.label" value="p_inst"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="pieza"/>
	</field>
	<field name="p_fami" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="p_fami"/>
		<property name="com.jaspersoft.studio.field.label" value="p_fami"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="familiar_historico_precio"/>
	</field>
	<group name="grColeccion">
		<groupExpression><![CDATA[$F{nombre_col}]]></groupExpression>
		<groupHeader>
			<band height="60">
				<staticText>
					<reportElement mode="Opaque" x="0" y="30" width="60" height="30" forecolor="#FFFFFF" backcolor="#7DA44E" uuid="f82126e6-2eb3-4e9a-a90f-e6bd42a0d7e4">
						<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e44ceea-9097-4c52-9017-e03b508a6695"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
						<pen lineStyle="Dashed" lineColor="#75FFA5"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left">
						<font fontName="Poppins Medium" size="13" isBold="true"/>
					</textElement>
					<text><![CDATA[ID]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="288" y="30" width="80" height="30" forecolor="#FFFFFF" backcolor="#7DA44E" uuid="3e726b54-02cf-429c-9261-c70f36077f1d">
						<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e44ceea-9097-4c52-9017-e03b508a6695"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="5" leftPadding="5" bottomPadding="5" rightPadding="5">
						<pen lineStyle="Dashed" lineColor="#75FFA5"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center">
						<font fontName="Poppins Medium" size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[CANTIDAD]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="468" y="30" width="100" height="30" forecolor="#FFFFFF" backcolor="#7DA44E" uuid="e1ebb6bd-7c41-4a0b-987d-6e790b4540a6">
						<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e44ceea-9097-4c52-9017-e03b508a6695"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
						<printWhenExpression><![CDATA[$F{p_fami} != null]]></printWhenExpression>
					</reportElement>
					<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
						<pen lineStyle="Dashed" lineColor="#75FFA5"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center">
						<font fontName="Poppins Medium" size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[PRECIO Bs.S]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="60" y="30" width="228" height="30" forecolor="#FFFFFF" backcolor="#7DA44E" uuid="87e6fb79-a1b2-4acb-a4b3-596e1b3672e5">
						<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e44ceea-9097-4c52-9017-e03b508a6695"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
						<pen lineStyle="Dashed" lineColor="#75FFA5"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left">
						<font fontName="Poppins Medium" size="13" isBold="true"/>
					</textElement>
					<text><![CDATA[NOMBRE]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Opaque" x="368" y="30" width="100" height="30" forecolor="#FFFFFF" backcolor="#7DA44E" uuid="e54a193a-2677-4edf-a846-66b4a1529db4">
						<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e44ceea-9097-4c52-9017-e03b508a6695"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
						<pen lineStyle="Dashed" lineColor="#75FFA5"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Center">
						<font fontName="Poppins Medium" size="12" isBold="true"/>
					</textElement>
					<text><![CDATA[PRECIO $ c/u]]></text>
				</staticText>
				<textField isBlankWhenNull="true">
					<reportElement mode="Opaque" x="0" y="0" width="568" height="30" forecolor="#FFFFFF" backcolor="#7DA44E" uuid="45305b90-e323-4b61-b061-37015f50355a">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left">
						<font fontName="Poppins Medium" size="13" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Colección "+$F{nombre_col}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<title>
		<band height="30">
			<staticText>
				<reportElement mode="Opaque" x="0" y="0" width="568" height="30" forecolor="#FFFFFF" backcolor="#128A4C" uuid="2502a714-ab39-47b8-ad91-51b32dd34917">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="7e44ceea-9097-4c52-9017-e03b508a6695"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
					<pen lineStyle="Dashed" lineColor="#128A4C"/>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Poppins Medium" size="13" isBold="true"/>
				</textElement>
				<text><![CDATA[PIEZAS]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="30" splitType="Stretch">
			<textField pattern="#,##0.##¤;(#,##0.##) ¤" isBlankWhenNull="true">
				<reportElement x="468" y="0" width="100" height="30" uuid="308490f3-b857-4ad9-a019-e36e1f78636b">
					<printWhenExpression><![CDATA[$F{p_fami} != null]]></printWhenExpression>
				</reportElement>
				<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Poppins" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{p_fami}.multiply($P{Tasa $})]]></textFieldExpression>
			</textField>
			<textField pattern="$#,##0.##;¤-#,##0.##" isBlankWhenNull="true">
				<reportElement x="368" y="0" width="100" height="30" uuid="c9e8718c-31f5-4bac-a869-2af6396a747c">
					<printWhenExpression><![CDATA[$F{p_fami} != null]]></printWhenExpression>
				</reportElement>
				<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Poppins" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{p_fami}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="60" y="0" width="228" height="30" uuid="75327fd7-ffba-4a7a-9108-5935e6d9723c"/>
				<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left">
					<font fontName="Poppins" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{molde}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="60" height="30" uuid="9d29f5ea-854c-4dd8-be2c-79684b08c8a1"/>
				<box topPadding="5" leftPadding="13" bottomPadding="5" rightPadding="5">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Left">
					<font fontName="Poppins" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["#"+$F{uid_pieza}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="288" y="0" width="80" height="30" uuid="611d0104-ee4f-4752-b054-e8706beffa39"/>
				<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Poppins" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidad}]]></textFieldExpression>
			</textField>
			<textField pattern="$#,##0.##;¤-#,##0.##" isBlankWhenNull="true">
				<reportElement x="368" y="0" width="100" height="30" uuid="9a5fe7df-f983-4002-8f07-629695ae9f4d">
					<printWhenExpression><![CDATA[$F{p_fami} == null]]></printWhenExpression>
				</reportElement>
				<box topPadding="5" leftPadding="12" bottomPadding="5" rightPadding="5">
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center">
					<font fontName="Poppins" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{p_inst}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
